{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %} {{ super() }} {{ channel.title}} {% endblock title %}

{% block head %} 
	{{ super() }} 
{% endblock head %}

{% block header %}
    {{ super() }}
{% endblock header %}

{% block main %}
    <div class="container main">
    	<div class="row">
    		<div class="col-md-10 m-auto text-right p-3 channel-option-container">
    			<a href="{{url_for('main.home')}}" class="float-left btn btn-outline-secondary btn-sm"><i class="fas fa-long-arrow-alt-left"></i> Back</a>
    			<a class="btn btn-primary btn-sm main-add-button" href="{{ url_for('main.add_question', channel_key=channel.key)}}"><i class="fas fa-plus"></i> Add new question</a>
    			<button class="btn btn-primary btn-sm main-review-button" data-toggle="modal" data-target="#review-modal"><i class="fas fa-play"></i> Start a review</button>
    		</div>
    	</div>
    	<div class="row">
    		<div class="col-md-8 m-auto pb-2 pt-2">
    			<h4>{{ channel.title }}</h4>
    		</div>
    	</div>
    	<div class="row justify-content-center question-card-container">
			<div class="col-md-8">
				<div class="">
    				{% if questions %}
    				    {% for question in questions %}
	    					<div class="card question-card">
			    				<div class="card-body">
			    					<div class="row d-flex">
			    						<div class="card-text ml-2 mr-2" >
			    							<a class="m-0" data-toggle="collapse" href="#question-{{ question.id}}" role="button">{{ question.text }}</a>
			    							<div class="collapse" id="question-{{ question.id}}">
			    								<hr>
												<div>
													{{ question.answer_page }}
													{{ question.answer_text }}
												</div>
											</div>
			    						</div>
			    					</div>
			    				</div>
			    				<a href="#"><span></span></a>
			    			</div>
	    				{% endfor %}
	    			{% else %}
	    			    <div class="card question-card">
		    				<div class="card-body">
		    					<div class="row justify-content-center">
		    						<div class="card-text ml-2">
		    							<p class="h4">No questions</p> 
		    						</div>
		    					</div>
		    				</div>
		    				<a href="#"><span></span></a>
		    			</div>
    				{% endif %}
    			</div>
    		</div>
    	</div>
    </div>

    <!-- review modal -->
    <div class="modal fade bd-example-modal-lg" id="review-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-dialog-centered" role="document">
	    <div class="modal-content bg-secondary">
	      <div class="modal-header">
	        <h5 class="modal-title" id="exampleModalLabel"></h5>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body text-light">
	        <div id="carouselExampleControls" class="carousel slide" data-interval="false">
			  <div class="carousel-inner p-5 text-center">
			    {% if questions %}
			        {% for question in questions %}
			    		{% if loop.index == 1 %}
			    			<div class="carousel-item active">
			    		{% else %}
			    	    	<div class="carousel-item">
			    		{% endif %}
				      		<p>{{ question.text }}</p>
				      		<a href="{{ url_for('main.home') }}" class="btn btn-sm btn-primary">View more</a>
				    	</div>
			    	{% endfor %}
			    
			    {% endif %}
			  </div>
			  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
			    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
			    <span class="sr-only">Previous</span>
			  </a>
			  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
			    <span class="carousel-control-next-icon" aria-hidden="true"></span>
			    <span class="sr-only">Next</span>
			  </a>
			</div>
	      </div>
	      <div class="modal-body m-auto">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	        <button type="button" class="btn btn-secondary">Done</button>
	      </div>
	    </div>
	  </div>
	</div>
{% endblock main %}

{% block footer %}
    {{ super() }}
{% endblock footer %}

{% block scripts %}
    {{ super() }}
    <script type="text/javascript">
    	$('[data-toggle="popover"]').popover();
    	$('.popover-dismiss').popover({
		  trigger: 'focus'
		});
    </script>
{% endblock scripts %}